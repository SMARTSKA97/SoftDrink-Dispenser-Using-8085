ORG 0000H
JMP START
START:MVI A,80H /Initialize control register
OUT 0C0H
MVI A,38H /LCD Function set command
CALL CMD
MVI A,38H
CALL CMD
MVI A,38H
CALL CMD
MVI A,01H /LCD clear command
CALL CMD
MVI A,0cH /LCD display command
CALL CMD
MVI A,80H /cursor position on display
CALL CMD
MVI A,50H /Ascii code for display data
CALL DATA
MVI A,52H
CALL DATA
MVI A,45H
CALL DATA
MVI A,53H
CALL DATA
MVI A,53H
CALL DATA
MVI A,20H
CALL DATA
MVI A,54H
CALL DATA
MVI A,48H
CALL DATA
MVI A,45H
CALL DATA
MVI A,20H
CALL DATA
MVI A,42H
CALL DATA
MVI A,55H
CALL DATA
MVI A,54H
CALL DATA
MVI A,54H
CALL DATA
MVI A,4FH
CALL DATA
MVI A,4EH
CALL DATA
MVI A,098H /initialize control register
OUT 0C0H
SWITCH: MVI A,040H /set sod pin to low
SIM
IN 00H /input
MOV B,A /store input in register B
ANI 07H /Masking of port A
XRI 06H /Check for switch 1
JZ LOW
MOV A,B
XRI 05H /check for switch 2
JZ MEDIUM
MOV A,B
XRI 03H /check for switch 3
JZ HIGH
JMP SWITCH
LOW:MVI A, 0C0H /set sod pin high  /delay loop for switch 1
SIM
LOOP:MVI D, 010H
MVI E, 040H
AGAIN1:MVI B,00H
AGAIN:DCR B
JNZ AGAIN
DCX D
MOV A,E
ORA D
JNZ AGAIN1
JMP SWITCH
MEDIUM:MVI A, C0H /set sod pin high  /delay loop for switch 2
SIM 
MVI D, 020H
MVI E, 07FH
AGAIN3:MVI B, 00H
AGAIN2:DCR B
JNZ AGAIN2
DCX D
MOV A, E
ORA D
JNZ AGAIN3
HIGH:MVI A, C0H /set sod pin high  /delay loop for switch 3
SIM
MVI D, 030H
MVI E, 0C0H
AGAIN5:MVI B, 00H
AGAIN4:DCR B
JNZ AGAIN4
DCX D
MOV A, E
ORA D
JNZ AGAIN5
CMD: OUT 80H
MVI A,01H ;RS=0,E=1
OUT 40H
CALL DELAY
MVI A,00H ;RS=0,E=0
OUT 40H
CALL DELAY
RET
DATA:OUT 80H
MVI A,03H ;RS=1,E=1
OUT 40H
CALL DELAY
MVI A,02H ;RS=1,E=0
OUT 40H
CALL DELAY
RET
DELAY:MVI C,8CH
LOOP:DCR C
JNZ LOOP
RET
.END
